<!-- app/views/list_items/create.turbo_stream.erb -->
<%= turbo_stream.prepend "list-items" do %>
  <%= render "list_items/item", item: @list_item, list: @list %>
<% end %>
<%= turbo_stream.replace "new_list_item" do %>
  <%= render "list_items/quick_add_form", list: @list, list_item: @list.list_items.build %>
<% end %>
<%= turbo_stream.update "flash-messages" do %>
  <%= render "shared/flash_messages" %>
<% end %>
<!-- Update list stats when item is added -->
<%= turbo_stream.replace "list-stats" do %>
  <% stats = list_completion_stats(@list) %>
  <div class="flex items-center space-x-6 text-sm text-gray-600">
    <div class="flex items-center">
      <span class="font-medium"><%= stats[:completed] %>/<%= stats[:total] %></span>
      <span class="ml-1">completed</span>
    </div>
    <div class="flex-1 max-w-xs">
      <%= progress_bar(stats[:percentage]) %>
    </div>
    <span class="font-medium"><%= stats[:percentage] %>%</span>
  </div>
<% end %>